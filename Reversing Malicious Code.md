# Reversing Malicious Code
- **Goal is to understand common malware characteristics at a code level**
- May include potential branches of execution with code analysis 

- **Overview of the code lifecycle**
- Source code is translated into object code by a compiler
- Object code is then combined with librries and an executable file is created
- To run the file, the operating system reads various information from the executable file, allocates memory, and loads required libraries into memory
- Control is transfered to the code to execute
- At this final stage is where we examine the code with a debugger
- Note: Libraries may be loaded during the programs execution 

## Ghidra 
- Developed by NSA
- Its decompiler produces a C representation of the code to speed up analysis 
- Includes support for writing java and python scripts to automate analysis 
- Help is accessed via F1 key 
- Ghidra v10 includes a debugger
- https://for610.com/ghidra
#### Create a new project 
- `File --> New Project`
- Choose the project type 
- Click `Finish`
- Drag and drop the speciment into the project window
- Accept defaults in the `Imports` windows and click Ok
#### Launch the code browser and being the auto-analysis 
- Make sure to enable `WindowsPE x86 Propagate Exernal Parameters` option
- Finally click the Analyze button and wait for Ghidra to finish 
- Once auto analysis is compled an Auto Analysis summary will show any warnings or issues encountered during the rocess 
- A common warning is that the file does not `contain debug information` 
- This is common and not an issue 

#### Before Proceeding save the project and take a snapshot 
### Ghidra Overview 
- Main window is the `Listing View` which presents the target programs coe and data 
- Will initially bring you to the beginning of the file in the `Listing View` --> notice the `MZ` string
- If you scroll down from there you can examine the programs header

#### Program Tree 
- Window is in the top left and shows the different sections and headers 
- Section names are typically:
````
































































































